<button onclick="createEmbed();">
Create Embed
<span class="tooltip"> Creates a new &lt;embed&gt; overwriting any existing ones; but does not attach it to DOM. </span>
</button>
<button onclick="attachEmbed();"> Attach Embed </button>
<button onclick="deleteEmbed();"> Delete Embed </button>
<button onclick="navigateEmbed(urlLocal);"> To Local HTML </button>
<button onclick="navigateEmbed(urlRemote)"> To Remote HTML </button>
<button onclick="navigateFrame(urlLocal)"> To Local (use window.frames) </button>
<button onclick="navigateFrame(urlRemote)"> To Remote (use window.frames) </button>
<button onclick="useFlash(flashUrl1);"> Flash 1 </button>
<button onclick="useFlash(flashUrl2);"> Flash 2 </button>

<style>
button:hover tooltip {
  visibility: visible
}
</style>
<div style="width: 100%; height: 50%; border: solid red;" id="embed-container"></div>
<div style="width: 100%; height: 50%; border: solid red;" id="updates"></div>

<script>
var embed_ = null;
let urlLocal = "./beforeunload.html";
let urlRemote = "https://jsfiddle.net/ekaramad/w9rpzuuk/show";
let urlFlash1 = "./res/flash1.swf";
let urlFlash2 = "./res/flash2.swf";
function createEmbed() {
  if (embed_)
    deleteEmbed();
  embed_ = document.createElement('embed');
  embed_.style = "width: 500px; height: 400px; border: solid purple 2px;";
}

function attachEmbed() {
  if (!embed_ || embed_.parentNode)
    return;
  document.getElementById('embed-container').appendChild(embed_);
}

function deleteEmbed() {
  if (!embed_)
    return;
  if (embed_.parentNode)
    embed_.parentNode.removeChild(embed_);
  embed_ = null;
}

function navigateEmbed(url) {
  if (!embed_)
    return;
  embed_.type = "text/html";
  embed_.src = url;
}

function navigateFrame(url) {
  if (window.frames[0])
    window.frames[0].location.href = url;
}

function useFlash(url) {
  if (!embed_)
    return;
  embed_.type = "application/x-shockwave-flash";
  embed_.src = url;
}

function onMessageFromFlash(msg) {
  console.log(`${(new Date()).toString()}: Received '${msg}`);
  window.setTimeout(() => {
    embed_.onMessageFromWindow('hello');
  }, 1000);
}
</script>
