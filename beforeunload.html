<h1> With (before) unload handler. </h1>

<script>
window.addEventListener('beforeunload', function(e) {
  window.postMessage("beforeunload", "*");
  e.returnValue = 'Do you want to leave?';
  return e.returnValue;
});

window.addEventListener('load', function() {
  window.parent.postMessage({type: "load"}, "*");
});

window.addEventListener('unload', function(e) {
  window.parent.postMessage({type: "unload"}, '*');
});
</script>
